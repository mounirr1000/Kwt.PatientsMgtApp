@using PagedList.Mvc;
@model PagedList.IPagedList<Kwt.PatientsMgtApp.Core.Models.PaymentModel>
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{
    ViewBag.Title = "List";
}

<h2>Payments</h2>

<p>
    @Html.ActionLink("New Payment", "Create", null, new { @class = "btn btn-lg btn-info fa fa-plus fa-1x" })
</p>
@if (Model.Any())
{
    <div class="p-3">
        @{ Html.RenderPartial("_PaymentSearchForm"); }
    </div>
    <table class="table text-center table-bordered table-striped">
        <tr>
            <th>
                Payment Id
            </th>
            <th>

                Payment Date
            </th>

            <th>

                Patient CID
            </th>

            <th>

                Companion CID
            </th>

            <th>

                Beneficiary CID
            </th>

            <th>

                Payment Start Date
            </th>
            <th>

                Payment End Date
            </th>

            <th>

                Total Due
            </th>
            <th>

                Notes
            </th>
            <th>

                Created Date
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.ActionLink(item.Id.ToString(), "Details", new {paymentId = item.Id})
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PaymentDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PatientCID)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.CompanionCID)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.BeneficiaryCID)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.PaymentStartDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PaymentEndDate)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.TotalDue)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Notes)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.CreatedDate)
                </td>

                <td>
                    @*@Html.ActionLink("Delete", "Delete", new { paymentId = item.Id})*@
                    <a href="javascript:confirmDelete('@item.Id','paymentId')" class="btn btn-danger" id="@item.PatientCID">Delete</a>
                </td>
            </tr>
        }

    </table>
    <span>Page</span>
    @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
    <span>of</span>
            @Model.PageCount
            @Html.PagedListPager(Model, page => Url.Action("List", new { page }));
}
else
{
    <div class="alert-info">
        No Payments to show in our records!
    </div>
}

@section DeleteConfirm{

    @{ Html.RenderPartial("_DeleteConfirmationModel"); }

}

@section Scripts {

    @{ Html.RenderPartial("_DeleteConfirmationjs"); }
    <script type="text/javascript">
        $("#clear").click(function (e) {
            console.log("Clear serch");
            $("#searchPatient").val("");
            $("#clearSearch").val(true);
            //e.preventDefault();
        });
    </script>
}